# Guia de Solu√ß√£o de Problemas - MicroSEAL

## Diagn√≥stico R√°pido

### ‚ö° Verifica√ß√£o Inicial (2 minutos)

1. **Navegador:** Chrome/Edge 88+ ‚úÖ
2. **Conex√£o USB:** Cabo conectado ‚úÖ
3. **Alimenta√ß√£o:** 24V nos sensores ‚úÖ
4. **Interface:** Arquivo index.html aberto ‚úÖ

### üîç Identifica√ß√£o do Problema

| Sintoma | Problema Prov√°vel | Se√ß√£o |
|---------|------------------|-------|
| "Serial API n√£o suportada" | Navegador incompat√≠vel | [Navegador](#problemas-de-navegador) |
| "Erro ao abrir porta" | Conflito de porta | [Conex√£o](#problemas-de-conex√£o) |
| "Nenhuma resposta" | Comunica√ß√£o Modbus | [Comunica√ß√£o](#problemas-de-comunica√ß√£o) |
| Gr√°ficos n√£o atualizam | Performance/dados | [Performance](#problemas-de-performance) |
| Exporta√ß√£o falha | Permiss√µes/browser | [Exporta√ß√£o](#problemas-de-exporta√ß√£o) |

## Problemas de Navegador

### ‚ùå "Serial API n√£o suportada"

**Causa:** Navegador n√£o suporta Web Serial API

**Solu√ß√µes:**

1. **Usar navegador compat√≠vel:**
   ```
   ‚úÖ Chrome 88+
   ‚úÖ Edge 88+ 
   ‚ö†Ô∏è Firefox 89+ (experimental)
   ‚ùå Safari (n√£o suportado)
   ```

2. **Habilitar flags experimentais (Firefox):**
   ```
   1. Acessar: about:config
   2. Buscar: dom.serial.enabled
   3. Alterar para: true
   4. Reiniciar navegador
   ```

3. **Verificar vers√£o do Chrome:**
   ```
   chrome://version/
   ```

### ‚ö†Ô∏è Interface n√£o carrega completamente

**Sintomas:**
- Gr√°ficos n√£o aparecem
- Bot√µes n√£o funcionam
- Console mostra erros

**Solu√ß√µes:**

1. **Verificar conex√£o √† internet (primeira carga):**
   ```
   Necess√°rio para CDN do Chart.js e jQuery
   ```

2. **Limpar cache do navegador:**
   ```
   Ctrl+Shift+Delete ‚Üí Limpar cache
   ```

3. **Testar em modo privado/inc√≥gnito:**
   ```
   Ctrl+Shift+N (Chrome)
   Ctrl+Shift+P (Firefox)
   ```

## Problemas de Conex√£o

### ‚ùå "Erro ao abrir a porta"

**Diagn√≥stico passo a passo:**

1. **Verificar porta em uso:**
   ```
   Windows: Device Manager ‚Üí Ports (COM & LPT)
   Linux: ls /dev/ttyUSB* ou ls /dev/ttyACM*
   macOS: ls /dev/cu.*
   ```

2. **Fechar programas concorrentes:**
   - Arduino IDE
   - PuTTY/Tera Term
   - Outros softwares de comunica√ß√£o serial

3. **Reinstalar drivers:**
   ```
   FTDI: ftdichip.com/drivers/
   CH340: wch.cn/downloads/
   CP2102: silabs.com/developers/usb-to-uart-bridge
   ```

### üîå Porta n√£o aparece na lista

**Verifica√ß√µes:**

1. **Cabo USB:**
   - Testar com outro cabo
   - Verificar se √© cabo de dados (n√£o apenas carga)

2. **Porta USB:**
   - Testar em outra porta
   - Verificar se a porta fornece energia suficiente

3. **Driver do adaptador:**
   ```bash
   # Linux - verificar reconhecimento
   dmesg | grep -i usb
   lsusb
   
   # Windows - Device Manager
   # Procurar por dispositivos com erro (‚ö†Ô∏è ou ‚ùå)
   ```

### üîÑ Conex√£o inst√°vel

**Sintomas:**
- Conex√£o funciona √†s vezes
- Perda intermitente de dados
- Timeouts frequentes

**Solu√ß√µes:**

1. **Verificar cabo e conectores:**
   - Cabo blindado para ambientes com ru√≠do
   - Conectores bem encaixados
   - Comprimento m√°ximo: 15 metros

2. **Aterramento:**
   ```
   GND do adaptador conectado ao GND dos sensores
   ```

3. **Alimenta√ß√£o est√°vel:**
   ```
   24V DC est√°vel nos sensores
   Verificar quedas de tens√£o
   ```

## Problemas de Comunica√ß√£o

### üì° "Dispositivo X: nenhuma resposta"

**Diagn√≥stico Modbus:**

1. **Verificar ID do dispositivo:**
   ```javascript
   // Alterar IDs no campo respectivo
   // Testar com um dispositivo por vez: "1"
   ```

2. **Testar diferentes baud rates:**
   ```
   Tentar: 9600, 19200, 38400 bps
   Verificar configura√ß√£o dos sensores
   ```

3. **Verificar cabeamento RS485:**
   ```
   A+ ‚Üí Linha A (positiva)
   B- ‚Üí Linha B (negativa)  
   GND ‚Üí Terra comum
   ```

### üõ†Ô∏è Debug de comunica√ß√£o Modbus

**Habilitar logs detalhados:**
1. Confirmar "Sim" na pergunta inicial sobre logs
2. Verificar se√ß√£o "Debug" na interface
3. Analisar frames hexadecimais

**Frame de exemplo (Dispositivo 1):**
```
Envio:    01 03 00 00 00 05 85 C6
          ‚îÇ  ‚îÇ  ‚îÇ     ‚îÇ     ‚îî‚îÄ‚îÄ CRC
          ‚îÇ  ‚îÇ  ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Quantity (5)
          ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Start Address (0)
          ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Function Code (3)
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Slave ID (1)

Resposta: 01 03 0A [10 bytes dados] [CRC]
          ‚îÇ  ‚îÇ  ‚îÇ
          ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ Byte count (10)
          ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Function code (3)
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Slave ID (1)
```

### ‚ö†Ô∏è "CRC inv√°lido"

**Causas:**
- Interfer√™ncia eletromagn√©tica
- Cabo muito longo ou de baixa qualidade
- Baud rate incorreto
- Ru√≠do el√©trico

**Solu√ß√µes:**

1. **Reduzir interfer√™ncia:**
   ```
   - Cabo blindado
   - Afastar de fontes de ru√≠do (motores, inversores)
   - Aterramento adequado
   ```

2. **Melhorar qualidade do sinal:**
   ```
   - Cabo de par tran√ßado
   - Resistores de termina√ß√£o (120Œ©)
   - Comprimento menor que 1200m
   ```

3. **Ajustar par√¢metros:**
   ```
   - Reduzir baud rate
   - Aumentar timeout
   - Verificar imped√¢ncia da linha
   ```

## Problemas de Performance

### üêå Lentid√£o na atualiza√ß√£o

**Sintomas:**
- Gr√°ficos atualizam lentamente
- Interface travada
- CPU alta

**Otimiza√ß√µes:**

1. **Reduzir taxa de aquisi√ß√£o:**
   ```javascript
   Intervalo: 50ms ‚Üí 100ms ou 500ms
   ```

2. **Limitar hist√≥rico:**
   ```javascript
   Hist√≥rico: 30min ‚Üí 10min ou 5min
   ```

3. **Reduzir dispositivos:**
   ```javascript
   IDs: "1,2,3,4" ‚Üí "1,2" (apenas essenciais)
   ```

### üíæ Alto uso de mem√≥ria

**Monitoramento:**
```
Chrome: F12 ‚Üí Performance ‚Üí Memory
Verificar crescimento constante de mem√≥ria
```

**Solu√ß√µes:**

1. **Limpeza autom√°tica:**
   ```javascript
   // Sistema limpa automaticamente dados antigos
   // Configura√ß√£o: Hist√≥rico (minutos)
   ```

2. **Exporta√ß√£o regular:**
   ```
   Exportar dados a cada 1-2 horas
   Limpar dados ap√≥s exporta√ß√£o
   ```

3. **Reinicializa√ß√£o peri√≥dica:**
   ```
   Recarregar p√°gina (F5) a cada 8-12 horas
   ```

### üñ•Ô∏è Travamento do navegador

**Recupera√ß√£o:**

1. **Aguardar 30 segundos:**
   ```
   JavaScript pode estar processando
   ```

2. **Recarregar p√°gina:**
   ```
   F5 ou Ctrl+R
   ```

3. **Reiniciar navegador:**
   ```
   Fechar todas as abas
   Abrir nova inst√¢ncia
   ```

## Problemas de Exporta√ß√£o

### üìÅ "Erro ao exportar dados"

**Verifica√ß√µes:**

1. **Dados existem:**
   ```
   Verificar se grava√ß√£o foi iniciada
   Confirmar que h√° dados coletados
   ```

2. **Permiss√µes de escrita:**
   ```
   Windows: Verificar pasta Downloads
   Linux: Verificar permiss√µes do diret√≥rio
   ```

3. **Espa√ßo em disco:**
   ```
   Verificar espa√ßo dispon√≠vel
   Arquivo CSV pode ser grande (>100MB)
   ```

### üíæ Download n√£o funciona

**Fallback manual:**

1. **Copiar dados dos logs:**
   ```
   F12 ‚Üí Console
   Copiar dados exibidos
   Colar em editor de texto
   ```

2. **Tentar navegador diferente:**
   ```
   Chrome ‚Üí Edge
   Testar File System Access API
   ```

3. **Modo privado:**
   ```
   Testar em janela privada/inc√≥gnita
   ```

## Problemas de Hardware

### ‚ö° Sensores n√£o respondem

**Verifica√ß√£o de alimenta√ß√£o:**

1. **Tens√£o de entrada:**
   ```
   Mult√≠metro: 24V DC ¬±10%
   Verificar polaridade
   ```

2. **Consumo de corrente:**
   ```
   Verificar especifica√ß√µes dos sensores
   Fonte com capacidade suficiente
   ```

### üîå Problemas de cabeamento

**RS485 - Verifica√ß√£o:**

1. **Identifica√ß√£o dos fios:**
   ```
   A+ (Data+): Geralmente verde/branco
   B- (Data-): Geralmente azul/amarelo
   GND: Preto/blindagem
   ```

2. **Continuidade:**
   ```
   Mult√≠metro em modo continuidade
   Verificar conex√µes ponto a ponto
   ```

3. **Isola√ß√£o:**
   ```
   Verificar resist√™ncia entre A+ e B-
   Deve ser alta (>1MŒ©) quando desligado
   ```

### üå°Ô∏è Leituras incorretas

**Calibra√ß√£o:**

1. **Verificar fatores de convers√£o:**
   ```javascript
   // Press√£o: voltage * 40.0 - correction
   // Dist√¢ncia: voltage * 30.0
   // Temperatura: rawValue * 0.05
   ```

2. **Comparar com padr√£o:**
   ```
   Usar calibrador de press√£o
   R√©gua para dist√¢ncia
   Term√¥metro de refer√™ncia
   ```

## Logs de Diagn√≥stico

### üìã Informa√ß√µes para Suporte

**Coletar antes de solicitar ajuda:**

1. **Vers√£o do sistema:**
   ```
   Navegador: chrome://version/
   SO: Windows/Linux/macOS
   Vers√£o da aplica√ß√£o: v6.32
   ```

2. **Configura√ß√£o atual:**
   ```
   IDs dos dispositivos: 1,2,3,4
   Baud rate: 38400
   Paridade: none
   Stop bits: 1
   ```

3. **Logs de erro:**
   ```
   F12 ‚Üí Console
   Copiar mensagens de erro
   Se√ß√£o Debug da interface
   ```

4. **Frames Modbus:**
   ```
   Dados enviados/recebidos (hex)
   Timestamps dos eventos
   ```

### üîç Comandos de Diagn√≥stico

**Windows:**
```cmd
# Listar portas COM
mode

# Device Manager
devmgmt.msc

# Verificar drivers
driverquery
```

**Linux:**
```bash
# Listar dispositivos USB
lsusb

# Verificar portas seriais
ls /dev/tty*

# Log do sistema
journalctl -f

# Permiss√µes
ls -l /dev/ttyUSB0
```

**macOS:**
```bash
# Listar portas
ls /dev/cu.*

# Informa√ß√µes do sistema
system_profiler SPUSBDataType
```

## Preven√ß√£o de Problemas

### üõ°Ô∏è Melhores Pr√°ticas

1. **Verifica√ß√£o pr√©-operacional:**
   - [ ] Hardware conectado e alimentado
   - [ ] Navegador atualizado
   - [ ] Drivers instalados
   - [ ] Configura√ß√µes verificadas

2. **Durante opera√ß√£o:**
   - [ ] Monitorar logs de debug
   - [ ] Exportar dados regularmente
   - [ ] Verificar indicadores de status

3. **Manuten√ß√£o peri√≥dica:**
   - [ ] Limpar cache do navegador (semanal)
   - [ ] Verificar conex√µes f√≠sicas (mensal)
   - [ ] Atualizar drivers (conforme necess√°rio)

### üìä Monitoramento de Sa√∫de

**Indicadores de problema:**
- ‚ö†Ô∏è Timeouts frequentes (>5% das leituras)
- ‚ö†Ô∏è CRC inv√°lido (>1% dos frames)
- ‚ö†Ô∏è Uso de mem√≥ria crescente constante
- ‚ö†Ô∏è Valores fora da faixa esperada

**A√ß√µes preventivas:**
- üìà Exportar dados quando uso de mem√≥ria > 50MB
- üîÑ Reiniciar comunica√ß√£o se timeout > 10%
- üßπ Limpar dados antigos automaticamente

---

## üìû Suporte T√©cnico

**Antes de solicitar suporte:**
1. ‚úÖ Seguir este guia de troubleshooting
2. ‚úÖ Coletar logs de diagn√≥stico
3. ‚úÖ Documentar configura√ß√£o atual
4. ‚úÖ Tentar reproduzir o problema

**Informa√ß√µes necess√°rias:**
- Vers√£o do navegador e SO
- Configura√ß√£o dos dispositivos
- Logs de erro completos
- Descri√ß√£o detalhada do problema

**Contato:**
Instituto SENAI de Inova√ß√£o

---

*Guia de Solu√ß√£o de Problemas - MicroSEAL v6.32*
